# 操作文件与目录

| 命令  | 功能                   |
| ----- | ---------------------- |
| cp    | 复制文件和目录         |
| mv    | 移动或重命名文件或目录 |
| mkdir | 创建目录               |
| rm    | 移除文件和目录         |
| in    | 创建硬链接和符号链接   |

## 通配符

- 通配符，和叫作文件名替换，允许洪湖依据字符模式来选择文件名。

| 通配符        | 匹配项                                          |
| ------------- | ----------------------------------------------- |
| *             | 匹配任意**多个**字符（包括0和1）                |
| ？            | 匹配任一**单个**字符（不包括0）                 |
| [characters]  | 匹配任意一个属于字符串中的字符                  |
| [!characters] | 匹配任意一个**不属于**字符串中的字符            |
| [[:class:]]   | 匹配任意一个属于指定**<u>字符串类</u>**中的字符 |

- 常用字符类

| 字符类    | 匹配项             |
| --------- | ------------------ |
| [:alnum:] | 任意一个字母或数字 |
| [:alpha:] | 任意一个字母       |
| [:digit:] | 任意一个数字       |
| [:lower:] | 任意一个小写字母   |
| [:upper:] | 任意一个大写字母   |

- 示例

| 模式            | 匹配项                                    |
| --------------- | ----------------------------------------- |
| *               | 所有文件                                  |
| g*              | 以g开头的任一文件                         |
| b*.txt          | b开头，.txt结尾，中间任意多字符的任一文件 |
| Data???         | Data开头，后面跟3个字符的任一文件         |
| [abc]*          | abc中任意一个开头的任一文件               |
| A\[0-9\]\[0-9\] | 以A开头，后面跟2个数字的任一文件          |
| [[:upper:]]*    | 以大写字母开头的任一文件                  |
| [![:digit:]]*   | 不以数字开头的任一文件                    |
| *[[:lower:]123] | 以小写字母或者123中任意一个结尾的任一文件 |

## mkdir——创建目录

- 格式：`mkdir directory...`

```shell
[hadoop@hadoop05 ~]$ cd ccc/
[hadoop@hadoop05 ccc]$ ll
total 0
[hadoop@hadoop05 ccc]$ mkdir a1 b2 c3
[hadoop@hadoop05 ccc]$ ll
total 12
drwxrwxr-x 2 hadoop hadoop 4096 Nov 20 09:43 a1
drwxrwxr-x 2 hadoop hadoop 4096 Nov 20 09:43 b2
drwxrwxr-x 2 hadoop hadoop 4096 Nov 20 09:43 c3
```

- 命令后面可以跟多个参数，将会同时创建多个文件夹。

## cp——复制文件和目录

- 格式：
  - 单个文件的复制：`cp item1 item2`
  - 多个项目（文件或目录）复制到一个目录中：`cp item...  directory`

```shell
[hadoop@hadoop05 ~]$ cp -r ccc/a1/ ccc/b2/ ccc/c3/ ddd/
[hadoop@hadoop05 ~]$ cd ddd/
[hadoop@hadoop05 ddd]$ ll
total 12
drwxrwxr-x 2 hadoop hadoop 4096 Nov 20 09:48 a1
drwxrwxr-x 2 hadoop hadoop 4096 Nov 20 09:48 b2
drwxrwxr-x 2 hadoop hadoop 4096 Nov 20 09:48 c3
```

- cp  命令选项

| 命令                | 含义                                                         |
| ------------------- | ------------------------------------------------------------ |
| -a    --archive     | 复制文件目录与属性，包括所有权和权限。                       |
| -i    --interactive | 在覆盖一个已存在的文件前，提示用户进行确认。（没有则默认覆盖） |
| -r    --recursive   | 递归的复制目录及其内容，<u>**复制目录**需要这个选项（或-a）</u>。 |
| -u    --update      | 当将文件从一个目录复制到另一个目录时候，只会复制目标中不存在或更新的文件。 |
| -v    --verbose     | 复制文件时，显示消息性消息                                   |

- 示例

| 命令                | 结果                                                         |
| ------------------- | ------------------------------------------------------------ |
| cp file1 file2 dir1 | 将file1、file2复制到dir1中，dir1必须已经存在                 |
| cp dir1/* dir2      | 将dir1所有文件复制到dir2，dir2必须已经存在                   |
| cp -r dir1 dir2     | 将dir1目录及其内容，复制到dir2目录中。如果dir2不存在，则创建dir2，且包含与dir1相同的内容。 |



```shell
#事先存在fff目录，所以直接将ddd复制到了fff/目录下
[hadoop@hadoop05 ~]$ cp -r ddd/ fff/
[hadoop@hadoop05 ~]$ ll fff/
total 4
drwxrwxr-x 5 hadoop hadoop 4096 Nov 20 10:01 ddd
[hadoop@hadoop05 ~]$ cp -r ddd/ ggg/
#事先 不存在 ggg/目录 ，所以将ddd目录下的内容复制到了 ggg/目录下
[hadoop@hadoop05 ~]$ ll ggg/
total 12
drwxrwxr-x 2 hadoop hadoop 4096 Nov 20 10:02 a1
drwxrwxr-x 2 hadoop hadoop 4096 Nov 20 10:02 b2
drwxrwxr-x 2 hadoop hadoop 4096 Nov 20 10:02 c3
```

## mv——移动或重命名文件

- 格式：
  - `mv item... directory`
  - `mv item1 item2`

- 功能：移动 或者 重命名文件，取决于你的用法。
- 选项

| 选项 | 含义                             |
| ---- | -------------------------------- |
| -i   | 覆盖前确认。                     |
| -u   | 只移动不存在或者需要更新的文件。 |
| -v   | 移动时显示消息。                 |

## rm——删除文件和目录

- 使用需要非常小心！！！
- 格式：`rm item...`
- 选项：

| 选项 | 含义                                       |
| ---- | ------------------------------------------ |
| -i   | 删除确认（已存在文件时）。                 |
| -r   | 递归删除（删除目录必须有）。               |
| -f   | 忽略不存在的文件并无需确认，会覆盖-i选项。 |
| -v   | 删除显示消息。                             |

## ln——创建连接

- 格式：
  - 创建硬链接：`ln file link`
  - 创建符号链接：`ln -s item link` ，这里item可以是文件或目录。

### 硬链接

​	默认情况下，每一个文件有一个硬链接，该硬链接会为文件起名字。当创建一个硬链接的时候，也为这个文件创建了一个额外的目录条目。

- 局限性
  - 不能引用自身文件系统之外的文件。
  - 硬链接无法引用目录。
- 删除硬连接，文件本身内容还存在，除非该文件的所有链接都被删除了。

### 符号链接

​	为了克服硬连接的局限性创建的。

- 符号链接指向的文件与符号链接本身几乎没什么区别。
- 如果先删除了文件，那么符号链接依然存在（称为坏链接）。